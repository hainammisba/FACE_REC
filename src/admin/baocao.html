<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√°o C√°o Ch·∫•m C√¥ng</title>
    <link rel="shortcut icon" type="image/png" href="../assets/images/logos/seodashlogo.png" />
    <link rel="stylesheet" href="../assets/css/styles.min.css" />

    <style>
/* CƒÉn ch·ªânh kho·∫£ng c√°ch h·ª£p l√Ω */
.body-wrapper {
      padding-top: 20px; /* Ch·ªâ c·∫ßn kho·∫£ng c√°ch nh·ªè ƒë·ªÉ tr√°nh ch·∫°m v√†o header */
    }

    /* ƒêi·ªÅu ch·ªânh b·ªô l·ªçc d·ªØ li·ªáu */
    .filter-card {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    /* ƒê·∫£m b·∫£o n·ªôi dung kh√¥ng b·ªã ch·∫Øn ngang khi cu·ªôn */
    .content-section {
      margin-top: 10px; /* Gi√∫p bi·ªÉu ƒë·ªì kh√¥ng b·ªã ƒë·∫©y xu·ªëng qu√° xa */
    }

    /* N√∫t l·ªçc d·ªØ li·ªáu cƒÉn gi·ªØa */
    .filter-btn {
      width: 100%;
      max-width: 250px;
      display: block;
      margin: 15px auto 0;
    }
    </style>
</head>

<body>
    <div class="page-wrapper" id="main-wrapper" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
        data-sidebar-position="fixed" data-header-position="fixed">

        <!-- Sidebar -->
        <div id="sidebar-container"></div>
        <script>
            fetch('layout/sidebar.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('sidebar-container').innerHTML = html;
                })
                .catch(err => console.error('Failed to load sidebar:', err));
        </script>

        <div class="body-wrapper">
            <header class="app-header sticky-header">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <ul class="navbar-nav">
                        <li class="nav-item d-block d-xl-none">
                            <a class="nav-link sidebartoggler nav-icon-hover" id="headerCollapse" href="javascript:void(0)">
                                <i class="ti ti-menu-2"></i>
                            </a>
                        </li>
                    </ul>
                </nav>
            </header>

            <div class="container-fluid content-wrapper">
                <h3 class="mb-3">üìä B√°o C√°o Ch·∫•m C√¥ng</h3>

                <!-- B·ªô L·ªçc D·ªØ Li·ªáu -->
                <div class="card p-4 mb-4">
                    <h5>üîç B·ªô l·ªçc d·ªØ li·ªáu</h5>
                    <div class="row">
                        <div class="col-md-4">
                            <label for="startDate">T·ª´ ng√†y:</label>
                            <input type="date" id="startDate" class="form-control">
                        </div>
                        <div class="col-md-4">
                            <label for="endDate">ƒê·∫øn ng√†y:</label>
                            <input type="date" id="endDate" class="form-control">
                        </div>
                        <div class="col-md-4">
                            <label for="employeeSelect">Nh√¢n vi√™n:</label>
                            <select id="employeeSelect" class="form-control">
                                <option value="all">T·∫•t c·∫£</option>
                                <option value="NV001">NV001</option>
                                <option value="NV002">NV002</option>
                                <option value="NV003">NV003</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary mt-3" onclick="updateCharts()">üîÑ L·ªçc d·ªØ li·ªáu</button>
                </div>

                <div class="row">
                    <!-- Bi·ªÉu ƒë·ªì c·ªôt s·ªë ng√†y l√†m vi·ªác -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-body">
                                <h5>üìÖ S·ªë ng√†y l√†m vi·ªác theo nh√¢n vi√™n</h5>
                                <div id="workDaysChart" class="chart-container"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Bi·ªÉu ƒë·ªì tr√≤n tr·∫°ng th√°i ch·∫•m c√¥ng -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-body">
                                <h5>üìå T·ª∑ l·ªá tr·∫°ng th√°i ch·∫•m c√¥ng</h5>
                                <div id="attendancePieChart" class="chart-container"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bi·ªÉu ƒë·ªì t·ªïng gi·ªù l√†m vi·ªác -->
                <div class="row mt-4">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <h5>‚è≥ T·ªïng gi·ªù l√†m vi·ªác theo ng√†y</h5>
                                <div id="workingHoursChart" class="chart-container"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- B·∫£ng chi ti·∫øt ch·∫•m c√¥ng -->
                <div class="row mt-4">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-body">
                                <h5>üìë Chi ti·∫øt ch·∫•m c√¥ng</h5>
                                <div class="table-responsive">
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Nh√¢n vi√™n</th>
                                                <th>Ng√†y</th>
                                                <th>Check-in</th>
                                                <th>Check-out</th>
                                                <th>Tr·∫°ng th√°i</th>
                                            </tr>
                                        </thead>
                                        <tbody id="attendanceTable"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="../assets/libs/jquery/dist/jquery.min.js"></script>
    <script src="../assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/libs/apexcharts/dist/apexcharts.min.js"></script>

    <script>
        function updateCharts() {
            let workDaysData = [22, 24, 20, 18, 25];
            let attendanceStatusData = [50, 20, 10, 15, 5];
            let workingHoursData = [8, 7.5, 9, 6, 8.5];

            new ApexCharts(document.querySelector("#workDaysChart"), {
                chart: { type: 'bar', height: 300 },
                series: [{ name: "S·ªë ng√†y", data: workDaysData }],
                xaxis: { categories: ["NV001", "NV002", "NV003", "NV004", "NV005"] }
            }).render();

            new ApexCharts(document.querySelector("#attendancePieChart"), {
                chart: { type: 'pie', height: 300 },
                series: attendanceStatusData,
                labels: ["OnTime", "Late", "EarlyLeave", "Absent", "Manual"]
            }).render();

            new ApexCharts(document.querySelector("#workingHoursChart"), {
                chart: { type: 'line', height: 300 },
                series: [{ name: "Gi·ªù l√†m", data: workingHoursData }],
                xaxis: { categories: ["NV001", "NV002", "NV003", "NV004", "NV005"] }
            }).render();
        }

        document.addEventListener("DOMContentLoaded", updateCharts);
    </script>
</body>

</html>
